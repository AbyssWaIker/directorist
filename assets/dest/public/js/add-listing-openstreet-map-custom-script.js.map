{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./assets/src/js/map-custom-scripts/add-listing/openstreet-map.js"],"names":["$","document","ready","loc_default_latitude","parseFloat","localized_data","default_latitude","loc_default_longitude","default_longitude","loc_manual_lat","manual_lat","loc_manual_lng","manual_lng","loc_map_zoom_level","parseInt","map_zoom_level","loc_map_icon","map_icon","isNaN","mapLeaflet","lat","lon","length","fontAwesomeIcon","L","icon","iconUrl","iconSize","mymap","map","setView","marker","draggable","addTo","on","e","target","position","getLatLng","val","lng","ajax","url","type","data","success","display_name","tileLayer","attribution","event","preventDefault","keyCode","search","css","res","i","html","getElementById","innerHTML","text","index","removeClass","addClass","click","jQuery"],"mappings":"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","file":"add-listing-openstreet-map-custom-script.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","; (function ($) {\r\n    $(document).ready(function () {\r\n        // Localized Data\r\n        var loc_default_latitude = parseFloat(localized_data.default_latitude);\r\n        var loc_default_longitude = parseFloat(localized_data.default_longitude);\r\n        var loc_manual_lat = parseFloat(localized_data.manual_lat);\r\n        var loc_manual_lng = parseFloat(localized_data.manual_lng);\r\n        var loc_map_zoom_level = parseInt(localized_data.map_zoom_level);\r\n        var loc_map_icon = localized_data.map_icon;\r\n\r\n        loc_manual_lat = (isNaN(loc_manual_lat)) ? loc_default_latitude : loc_manual_lat;\r\n        loc_manual_lng = (isNaN(loc_manual_lng)) ? loc_default_longitude : loc_manual_lng;\r\n\r\n        function mapLeaflet(lat, lon) {\r\n\r\n            // @todo @kowsar / remove later. fix js error\r\n            if($(\"#gmap\").length == 0) {\r\n                return;\r\n            }\r\n\r\n            const fontAwesomeIcon = L.icon({\r\n                iconUrl: loc_map_icon,\r\n                iconSize: [20, 25],\r\n            });\r\n            var mymap = L.map('gmap').setView([lat, lon], loc_map_zoom_level);\r\n\r\n            L.marker([lat, lon], {\r\n                icon: fontAwesomeIcon,\r\n                draggable: true\r\n            }).addTo(mymap).addTo(mymap).on(\"drag\", function (e) {\r\n                var marker = e.target;\r\n                var position = marker.getLatLng();\r\n                $('#manual_lat').val(position.lat);\r\n                $('#manual_lng').val(position.lng);\r\n                $.ajax({\r\n                    url: `https://nominatim.openstreetmap.org/reverse?format=json&lon=${position.lng}&lat=${position.lat}`,\r\n                    type: 'POST',\r\n                    data: {},\r\n                    success: function (data) {\r\n                        $('#address').val(data.display_name);\r\n                    }\r\n                });\r\n            });\r\n\r\n            L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {\r\n                attribution: '&copy; <a href=\"https://www.openstreetmap.org/copyright\">OpenStreetMap</a> contributors'\r\n            }).addTo(mymap);\r\n        }\r\n\r\n        $('#address').on('keyup', function (event) {\r\n            event.preventDefault();\r\n            if (event.keyCode !== 40 && event.keyCode !== 38) {\r\n                var search = $('#address').val();\r\n                $('#result').css({ 'display': 'block' });\r\n                if (search === \"\") {\r\n                    $('#result').css({ 'display': 'none' });\r\n                }\r\n                var res = \"\";\r\n                $.ajax({\r\n                    url: `https://nominatim.openstreetmap.org/?q=%27+${search}+%27&format=json`,\r\n                    type: 'POST',\r\n                    data: {},\r\n                    success: function (data) {\r\n                        //console.log(data);\r\n                        for (var i = 0; i < data.length; i++) {\r\n                            res += `<li><a href=\"#\" data-lat=${data[i].lat} data-lon=${data[i].lon}>${data[i].display_name}</a></li>`\r\n                        }\r\n                        $('#result ul').html(res);\r\n                    }\r\n                });\r\n            }\r\n        });\r\n\r\n        var lat = loc_manual_lat,\r\n            lon = loc_manual_lng;\r\n\r\n        mapLeaflet(lat, lon);\r\n\r\n        $('body').on('click', '#result ul li a', function (event) {\r\n            document.getElementById('osm').innerHTML = \"<div id='gmap'></div>\";\r\n            event.preventDefault();\r\n            let text = $(this).text(),\r\n                lat = $(this).data('lat'),\r\n                lon = $(this).data('lon');\r\n\r\n            $('#manual_lat').val(lat);\r\n            $('#manual_lng').val(lon);\r\n\r\n            $('#address').val(text);\r\n            $('#result').css({ 'display': 'none' });\r\n\r\n            mapLeaflet(lat, lon);\r\n        });\r\n\r\n        $('body').on('click', '#generate_admin_map', function (event) {\r\n            event.preventDefault();\r\n            document.getElementById('osm').innerHTML = \"<div id='gmap'></div>\";\r\n            mapLeaflet($('#manual_lat').val(), $('#manual_lng').val());\r\n\r\n        });\r\n\r\n        // Popup controller by keyboard\r\n        var index = 0;\r\n        $('#address').on('keyup', function (event) {\r\n            event.preventDefault();\r\n            var length = $('#directorist.atbd_wrapper #result ul li a').length;\r\n            if (event.keyCode === 40) {\r\n                index++;\r\n                if (index > length) {\r\n                    index = 0;\r\n                }\r\n            } else if (event.keyCode === 38) {\r\n                index--;\r\n                if (index < 0) {\r\n                    index = length\r\n                }\r\n                ;\r\n            }\r\n\r\n            if ($('#directorist.atbd_wrapper #result ul li a').length > 0) {\r\n\r\n                $('#directorist.atbd_wrapper #result ul li a').removeClass('active')\r\n                $($('#directorist.atbd_wrapper #result ul li a')[index]).addClass('active');\r\n\r\n                if (event.keyCode === 13) {\r\n                    $($('#directorist.atbd_wrapper #result ul li a')[index]).click();\r\n                    event.preventDefault();\r\n                    index = 0;\r\n                    return false;\r\n                }\r\n            }\r\n            ;\r\n\r\n        });\r\n\r\n        $('#post').on('submit', function (event) {\r\n            event.preventDefault();\r\n            return false;\r\n        });\r\n    });\r\n})(jQuery);\r\n\r\n"],"sourceRoot":""}